---
title: "ICMA D2SC Notebook"
output: html_notebook
author: Vidushi Kataria
date: "`r Sys.Date()`"
---
# ICMA Sept 9 2024

```{r}
plot(cars)
```

This plot states that the longer the distance of the car, the higher the speed is used.

# ICMA Sept 11 2024

This is where we put plain text.

```{r}
ohno_this_is_a_nightmare <- "hello"
```

```{r}
2+2
x <- 2+2
```

```{r}
my_vector <- c(2,3,4)
```

```{r}
mean(my_vector)
```

# Make sure that code chunks run smoothly from top to bottom. Order of chunks matter. 

```{r}
help(sd)
sd(1:2) ^ 2
```

# ICMA Sept 16 2024

```{r}
library(tidyverse)
```

Wide format is NOT tidy. All tidy data will be in long form.

The pipe (%>%) is an operator that takes the outcome of the thing before it and passes it, as an argument, to the next function.

For example...
```{r}
billboard %>% # take this dataset AND THEN...
  select(artist, date.entered) %>% # select these two columns AND THEN...
  filter(artist < "a") %>% # filter the dataset based on this value
  head(n=3) # only show first 3 rows 
```

ICMA: the pipe
```{r}
# not using pipe
my_numbers <-c(1, 2, 3, 4, 5, 6, 7, 8, 9, 10) 
mean(my_numbers)

# output appears in source window and in the console
```
```{r}
# using pipe
mean_my_numbers <- my_numbers %>%
  mean()

# output appears in the environment window under values
# output is the same-- 5.5
```

Tidyverse core packages include:
readr: reading & writing data
tidyr: tidying data
dplyr and purr: manipulating and transforming data
lubridate: working with dates
stringr: working with strings 
forcats: working with factors
ggplot2: the "grammar of graphics" for creating data visualizations 

```{r}
getwd() #finding my working directory 
```

haven for SPSS, Stata, SAS
readxl for Microsoft Excel files
readr for csv, tsv, txt, and other types of deliminated files

```{r}
?mtcars
```

```{r}
write_csv(mtcars, "mtcars_fromR.csv")

read_csv("mtcars_fromR.csv")
```

```{r}
glimpse(mtcars)
```
- The number of rows and columns are 32 x 11. This is what I expected after using the glimpse function, which told me the data frame has 32 observations on 11 (numeric) variables.

Checking column names and class types:
```{r}
colnames(mtcars)

sapply(mtcars, class)
```
The column names are as I expect. The help window explaining the format of the data frame explains each column. I do not need to change the labels as it accurately conveys each variable. 
The classes for each column are numeric, which is accurate in regards to the dataset and what it is trying to convey.

There are now empty rows and columns just by scanning through the dataset, so it is already clean. 

```{r}
library(readr)
mtcars <- read_csv("mtcars_fromR.csv", na = (c("", "NA", "-999")))
```
```{r}
mtcars %>%
  group_by(cyl) %>%
  count()
```

# ICMA Sept 18th 2024

```{r}
?ChickWeight
glimpse(ChickWeight)
```

```{r}
chick_clean <- ChickWeight %>%
  select(chick_id = Chick,
         diet = Diet,
         age_days = Time,
         weight_gm = weight)
```

mutate() also has it's own if/then type capability that can be useful: case_when()
```{r}
chick_clean %>%
  mutate(session = case_when(age_days == 0 ~ "birth",
                             age_days == 20 ~ "last1",
                             age_days ==21 ~ "last2",
                             TRUE          ~as.character(age_days)))
```


```{r}
chick_clean %>%
  filter(age_days == 20) %>%
  mutate(weight_lbs = weight_gm/453.6) %>%
  group_by(diet) %>%
  summarise(N = n(), 
            mean_wgt_gm = mean(weight_gm),
            mean_wgt_lbs = mean(weight_lbs))
```


# ICMA Sept 23 2024
Five main types of functions in tidyr:
- Pivoting: Converts between long and wide forms
- Splitting and combining: take character columns and split/combine them
- Missing values: For working with NAs (missing values)
- Rectangling: Turns deeply nested lists (as from JSON) into tidy tibbles
- (Un)Nesting: Converts between grouped data and a form where each group becomes a single row containing a nested data frame

```{r}
head(billboard)
```

```{r}
billboard_long <- billboard %>%
  pivot_longer(wk1:wk76,
               names_to = "week",
               values_to = "position",
               names_prefix = "wk",
               values_drop_na = TRUE)
```

```{r}
# reversing it back to wide format 
billboard_long %>%
  pivot_wider(names_from = "week",
              values_from = "position") 
```

```{r}
?pivot_longer
```

```{r}
billboard %>%
  separate(col = date.entered,
           into = c("year", "month", "day"))
```

